<!doctype html>
<html>
<head>
<meta charset=utf-8>
<title>a demo that reproduces Unicode Normalization issue.</title>
</head>

<body>


<p><a title="When a string is not a string? Unicode normalization weirdness in Javascript - Stack Overflow" href="http://stackoverflow.com/questions/29153533/when-a-string-is-not-a-string-unicode-normalization-weirdness-in-javascript?noredirect=1#comment46528333_29153533">Post on Stack Overflow</a> 

<p>Apparently, occurs in Firefox but not Chrome.</p>

<button id="NFKC">NFKC</button>

<script>
document.body.querySelector('#NFKC').id

var s1 = document.body.querySelector('#NFKC').id;
var s2 = 'NFKC';


'치'.normalize('NFC').length == 1;
// true

'치'.normalize('NFD').length == 2;
// true

'치'.normalize(s2);
// this works fine

'치'.normalize(s1) 
// <-- this causes a RangeError, despite the fact that s1 === s2

console.log(s1 === s2);
console.log(s1 == s2);
</script>
</body>
</html>
